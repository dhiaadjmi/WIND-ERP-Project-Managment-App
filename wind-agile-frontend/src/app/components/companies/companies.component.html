
<div class="spinner-container" *ngIf="showSpinner">
  <mat-spinner diameter="200" class="m-3"></mat-spinner>
</div>
<div class="col-lg-12">
  <mat-card class="cardWithShadow">
    <mat-card-content class="p-24">
      <mat-card-title> Liste Des Entreprises</mat-card-title>

      <div class="d-flex justify-content-between">
        <div class="relative flex items-center mr-auto">
          <button mat-flat-button color="primary" matTooltip="Info about the action" routerLink="/component/addcompany">
            Ajouter une entreprise <i class="fas fa-building mr-2"></i>
          </button>

        </div>
        <div class="input-group custom-form-field d-flex justify-content-end">
          <div class="input-group-prepend">
            <span class="input-group-text" id="inputGroupPrepend">        <i class="fas fa-search custom-icon" style="color: #facc15;"></i>
            </span>
          </div>
          <input type="text" class="form-control custom-input" placeholder="Rechercher par nom" aria-describedby="inputGroupPrepend" [(ngModel)]="searchTerm" (keyup)="searchCompanies()">
        </div>
      </div>







      <div class="table-responsive m-t-16">
        <table mat-table [dataSource]="dataSource" class="w-100">


          <ng-container matColumnDef="email">
            <th mat-header-cell *matHeaderCellDef class="f-w-600 mat-subtitle-1 f-s-14">
              Email de l'entreprise
            </th>
            <td mat-cell *matCellDef="let element" class="mat-body-1">
              <h6 class="mat-body-1">{{ element.email }}</h6>
            </td>
          </ng-container>

          <ng-container matColumnDef="companyName">
            <th mat-header-cell *matHeaderCellDef class="f-w-600 mat-subtitle-1 f-s-14">
               Nom d'entreprise
            </th>
            <td mat-cell *matCellDef="let element" class="mat-body-1">
              {{ element.companyName }}
            </td>
          </ng-container>

          <ng-container matColumnDef="sector">
            <th mat-header-cell *matHeaderCellDef class="f-w-600 mat-subtitle-1 f-s-14">
              Secteur
            </th>
            <td mat-cell *matCellDef="let element" class="mat-body-1">
              {{ element.sector }}
            </td>
          </ng-container>

          <ng-container matColumnDef="size">
            <th mat-header-cell *matHeaderCellDef class="f-w-600 mat-subtitle-1 f-s-14">
              Taille
            </th>
            <td mat-cell *matCellDef="let element" class="mat-body-1">
              {{ element.size }}
            </td>
          </ng-container>
          <ng-container matColumnDef="phoneNumber">
            <th mat-header-cell *matHeaderCellDef class="f-w-600 mat-subtitle-1 f-s-14">
              Numéro de téléphone
            </th>
            <td mat-cell *matCellDef="let element" class="mat-body-1">
              {{ element.phoneNumber }}
            </td>
          </ng-container>
          <ng-container matColumnDef="validation">
            <th mat-header-cell *matHeaderCellDef class="f-w-600 mat-subtitle-1 f-s-14">
              Validation
            </th>
            <td mat-cell *matCellDef="let element" class="mat-body-1">

              <button mat-icon-button matTooltip="Toggle Validation" [style.color]="element.validate ? '#00FF00' : '#ff0000'" (click)="toggleValidation(element.id)">
                <mat-icon>{{ element.validate ? 'verified_user' : 'block' }}</mat-icon>
              </button>

            </td>
          </ng-container>
          <ng-container matColumnDef="email_verified">
            <th mat-header-cell *matHeaderCellDef class="f-w-600 mat-subtitle-1 f-s-14">
              Vérification
            </th>
            <td mat-cell *matCellDef="let element" class="mat-body-1">
              <mat-icon class="email-verification-icon" [style.color]="element.emailVerified ? '#00FF00' : '#ff0000'">
                {{ element.emailVerified ? 'check' : 'clear' }}
              </mat-icon>
            </td>
          </ng-container>


          <ng-container matColumnDef="actions">
            <th mat-header-cell *matHeaderCellDef class="f-w-600 mat-subtitle-1 f-s-14">
              Actions
            </th>
            <td mat-cell *matCellDef="let element" class="mat-body-1">
              <button mat-icon-button matTooltip="Archive" style="color: #facc15" (click)="archiveCompany(element.id)">
                <mat-icon>archive</mat-icon>
              </button>


              <button mat-icon-button matTooltip="Update" style="color: #facc15" (click)="openUpdateDialog(element.id)">
                <mat-icon>autorenew</mat-icon>
              </button>

            </td>
          </ng-container>


          <tr mat-header-row *matHeaderRowDef="[ 'email', 'companyName', 'sector', 'size','phoneNumber','validation', 'email_verified','actions']"></tr>
          <tr mat-row *matRowDef="let row; columns: [ 'email', 'companyName', 'sector', 'size','phoneNumber', 'validation','email_verified','actions']"></tr>
        </table>
        <mat-paginator [pageSizeOptions]="[5, 10, 25, 100]" showFirstLastButtons></mat-paginator>


      </div>
    </mat-card-content>
  </mat-card>
</div>




