<div class="spinner-container" *ngIf="showSpinner">
  <mat-spinner diameter="100" class="m-3"></mat-spinner>
</div>

<mat-card class="add-user-card" style="width: 1000px; margin: 0 auto;">
  <mat-card-title class="add-user-title">Ajouter un nouvel Utilisateur</mat-card-title>
  <mat-card-content>
    <form class="m-t-30 form-row" #addUserForm="ngForm">

      <div class="form-column">
        <mat-label class="dialog-inputs f-s-14 f-w-600 m-b-12 d-block">Prénom</mat-label>
        <mat-form-field appearance="outline" class="w-100" color="primary">
          <input matInput name="firstname" [(ngModel)]="firstname" placeholder="Prénom" required />
          <mat-error *ngIf="addUserForm.controls['firstname'].errors?.['required']">
            Ce champ est requis
          </mat-error>
        </mat-form-field>
      </div>

      <div class="form-column">
        <mat-label class="dialog-inputs mat-subtitle-2 f-s-14 f-w-600 m-b-12 d-block">Nom de famille</mat-label>
        <mat-form-field appearance="outline" class="w-100" color="primary">
          <input matInput name="lastname" [(ngModel)]="lastname" placeholder="Nom de famille" required />
          <mat-error *ngIf="addUserForm.controls['lastname'].errors?.['required']">
            Ce champ est requis
          </mat-error>
        </mat-form-field>
      </div>

      <div class="form-column">
        <mat-label class="dialog-inputs mat-subtitle-2 f-s-14 f-w-600 m-b-12 d-block">Adresse e-mail</mat-label>
        <mat-form-field appearance="outline" class="w-100" color="primary">
          <input matInput name="email" [(ngModel)]="email" placeholder="Adresse e-mail" required email />
          <mat-error *ngIf="addUserForm.controls['email'].errors?.['required']">
            Ce champ est requis
          </mat-error>
          <mat-error *ngIf="addUserForm.controls['email'].errors?.['email']">
            Veuillez saisir une adresse e-mail valide
          </mat-error>
        </mat-form-field>
      </div>

      <div class="form-column">
        <mat-label class="dialog-inputs mat-subtitle-2 f-s-14 f-w-600 m-b-12 d-block">Emploi</mat-label>
        <mat-form-field appearance="outline" class="w-100" color="primary">
          <input matInput name="job" [(ngModel)]="job" placeholder="Emploi" required />
          <mat-error *ngIf="addUserForm.controls['job'].errors?.['required']">
            Ce champ est requis
          </mat-error>
        </mat-form-field>
      </div>

      <div class="form-column">
        <mat-label class="dialog-inputs mat-subtitle-2 f-s-14 f-w-600 m-b-12 d-block">Numéro de téléphone</mat-label>
        <mat-form-field appearance="outline" class="w-100" color="primary">
          <input matInput name="phoneNumber" [(ngModel)]="phoneNumber" placeholder="Numéro de téléphone" required />
          <mat-error *ngIf="addUserForm.controls['phoneNumber'].errors?.['required']">
            Ce champ est requis
          </mat-error>
        </mat-form-field>
      </div>

      <div class="form-column">
        <mat-label class="dialog-inputs mat-subtitle-2 f-s-14 f-w-600 m-b-12 d-block">Numéro d'identité</mat-label>
        <mat-form-field appearance="outline" class="w-100" color="primary">
          <input matInput name="cin" [(ngModel)]="cin" placeholder="Numéro d'identité" required />
          <mat-error *ngIf="addUserForm.controls['cin'].errors?.['required']">
            Ce champ est requis
          </mat-error>
        </mat-form-field>
      </div>

      <div class="form-column">
        <mat-label class="dialog-inputs mat-subtitle-2 f-s-14 f-w-600 m-b-12 d-block">Rôle</mat-label>
        <mat-form-field appearance="outline" class="w-100" color="primary">
          <mat-select name="role" [(ngModel)]="role" required>
            <mat-option value="LEADER">LEADER</mat-option>
            <mat-option value="EMPLOYEE">EMPLOYEE</mat-option>
          </mat-select>
          <mat-error *ngIf="addUserForm.controls['role'].errors?.['required']">
            Ce champ est requis
          </mat-error>
        </mat-form-field>
      </div>

      <button mat-flat-button color="primary" class="w-100" (click)="addUser()" [disabled]="!addUserForm.form.valid || showSpinner">
        Ajouter Utilisateur
      </button>
    </form>
  </mat-card-content>
</mat-card>
